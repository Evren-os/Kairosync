## Video Output & Hardware Acceleration
vo=gpu-next
gpu-api=vulkan
gpu-context=waylandvk
hwdec=vaapi
vd-lavc-film-grain=gpu
vd-lavc-threads=0
vulkan-async-compute=yes
vulkan-async-transfer=yes
vulkan-queue-count=1

## Display Synchronization
video-sync=audio

## Scaling Algorithms
scale=ewa_lanczossharp
scale-antiring=0.7

# Chroma upscaling
cscale=ewa_lanczos

# Downscaling
dscale=hermite
linear-downscaling=yes
correct-downscaling=yes

# Sigmoid upscaling
sigmoid-upscaling=yes

## Dithering
dither-depth=8
dither=fruit

## HDR Tone Mapping
target-trc=srgb
target-prim=bt.709
target-peak=203

# Tone mapping algorithm
tone-mapping=bt.2446a
hdr-compute-peak=yes
hdr-peak-percentile=99.995
hdr-peak-decay-rate=20
hdr-contrast-recovery=0.3
hdr-contrast-smoothness=3.5
gamut-mapping-mode=perceptual

## Audio Configuration
ao=pipewire,pulse,alsa
audio-channels=auto-safe
audio-normalize-downmix=yes
volume=100
volume-max=150

## Caching & Demuxer
cache=yes
cache-pause=yes
cache-pause-wait=3
demuxer-max-bytes=512MiB
demuxer-max-back-bytes=256MiB
demuxer-readahead-secs=20
demuxer-mkv-subtitle-preroll=yes

## Subtitles
sub-auto=fuzzy
sub-file-paths=ass:srt:sub:subs:subtitles
slang=en,eng,english,ar,ara,arabic
alang=en,eng,english,ar,ara,arabic

## Network & Streaming
ytdl-format=bestvideo[height<=2160]+bestaudio/best[height<=2160]

## Playback State
save-position-on-quit=yes
keep-open=yes
watch-later-directory=~/.config/mpv/watch_later
watch-later-options=vid,aid,sid,volume,start,speed,sub-visibility,audio-delay,sub-delay

## Screenshot
screenshot-format=png
screenshot-png-compression=7
screenshot-high-bit-depth=yes
screenshot-directory=~/Pictures/mpv
screenshot-template="%F-%P-%n"

## OSD & UI
osc=no
osd-bar=no
osd-duration=2000
osd-font-size=32
border=no

## 4K HDR Content
[4k-hdr]
profile-desc=4K HDR/DV content (Blu-ray Remux)
profile-cond=width >= 3840 and (p["video-params/primaries"] == "bt.2020" or p["video-params/gamma"] == "pq" or p["video-params/gamma"] == "hlg")
deband=no

## 4K SDR Content
[4k-sdr]
profile-desc=4K SDR content
profile-cond=width >= 3840 and p["video-params/primaries"] == "bt.709"
deband=no

## 1080p HDR Content
[1080p-hdr]
profile-desc=1080p HDR content
profile-cond=width <= 1920 and width > 0 and (p["video-params/primaries"] == "bt.2020" or p["video-params/gamma"] == "pq" or p["video-params/gamma"] == "hlg")
deband=yes
deband-iterations=2
deband-threshold=48
deband-range=16
deband-grain=24

## 1080p SDR Content
[1080p-sdr]
profile-desc=1080p SDR content (WEB-DL, standard video)
profile-cond=width <= 1920 and width > 0 and p["video-params/primaries"] == "bt.709"
deband=yes
deband-iterations=3
deband-threshold=48
deband-range=16
deband-grain=32

## Low Resolution Content
[sd-content]
profile-desc=SD and low resolution content
profile-cond=width < 1280 and width > 0
deband=yes
deband-iterations=4
deband-threshold=64
deband-range=24
deband-grain=48